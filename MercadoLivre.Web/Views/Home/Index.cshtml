@model IEnumerable<Produto>

@{
    ViewData["Title"] = "In√≠cio";
}

<!-- Banner Principal -->
<section class="hero-section mb-4">
    <div class="container">
        <div id="mainCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="0" class="active"></button>
                <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="1"></button>
                <button type="button" data-bs-target="#mainCarousel" data-bs-slide-to="2"></button>
            </div>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <div class="card border-0">
                        <div class="card-body text-center py-5" style="background: linear-gradient(135deg, #3483fa 0%, #2968c8 100%); color: white;">
                            <h2 class="mb-3">üéâ Mega Ofertas do Dia!</h2>
                            <p class="mb-4">At√© 70% de desconto em produtos selecionados</p>
                            <a href="@Url.Action("Buscar", "Home", new { termo = "oferta" })" class="btn btn-warning btn-lg">
                                Ver Ofertas
                            </a>
                        </div>
                    </div>
                </div>
                <div class="carousel-item">
                    <div class="card border-0">
                        <div class="card-body text-center py-5" style="background: linear-gradient(135deg, #00a650 0%, #008a43 100%); color: white;">
                            <h2 class="mb-3">üì± Eletr√¥nicos</h2>
                            <p class="mb-4">Os melhores pre√ßos em smartphones, notebooks e mais</p>
                            <a href="@Url.Action("Categoria", "Produtos", new { categoria = "Eletr√¥nicos" })" class="btn btn-light btn-lg">
                                Explorar
                            </a>
                        </div>
                    </div>
                </div>
                <div class="carousel-item">
                    <div class="card border-0">
                        <div class="card-body text-center py-5" style="background: linear-gradient(135deg, #ff9f00 0%, #e68900 100%); color: white;">
                            <h2 class="mb-3">üè† Casa e Decora√ß√£o</h2>
                            <p class="mb-4">Transforme sua casa com estilo e economia</p>
                            <a href="@Url.Action("Categoria", "Produtos", new { categoria = "Casa e Decora√ß√£o" })" class="btn btn-light btn-lg">
                                Comprar Agora
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#mainCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#mainCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
            </button>
        </div>
    </div>
</section>

<!-- Categorias Principais -->
@if (ViewBag.Categorias != null && ViewBag.Categorias.Count > 0)
{
    <section class="categories-section mb-5">
        <div class="container">
            <h3 class="mb-4">Categorias</h3>
            <div class="row">
                @{
                    var categoryIcons = new Dictionary<string, string>
                    {
                        { "Eletr√¥nicos", "fas fa-laptop" },
                        { "Roupas e Cal√ßados", "fas fa-tshirt" },
                        { "Casa e Decora√ß√£o", "fas fa-home" },
                        { "Esportes e Lazer", "fas fa-dumbbell" },
                        { "Livros", "fas fa-book" },
                        { "Beleza e Cuidado", "fas fa-heart" }
                    };
                }
                @foreach (var categoria in ViewBag.Categorias)
                {
                    <div class="col-lg-2 col-md-4 col-6 mb-3">
                        <a href="@Url.Action("Categoria", "Produtos", new { categoria = categoria.Nome })" class="category-item d-block">
                            <div class="category-icon">
                                <i class="@(categoryIcons.ContainsKey(categoria.Nome) ? categoryIcons[categoria.Nome] : "fas fa-tag")"></i>
                            </div>
                            <div class="category-name">@categoria.Nome</div>
                        </a>
                    </div>
                }
            </div>
        </div>
    </section>
}

<!-- Produtos em Destaque -->
@if (Model != null && Model.Count() > 0)
{
    <section class="featured-products mb-5">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h3 class="mb-0">Ofertas do dia</h3>
                <a href="@Url.Action("Buscar", "Home", new { termo = "promocao" })" class="text-decoration-none">
                    Ver todas as ofertas <i class="fas fa-arrow-right"></i>
                </a>
            </div>
            <div class="row">
                @foreach (var produto in Model)
                {
                    <div class="col-lg-3 col-md-4 col-sm-6 mb-4">
                        <div class="card product-card h-100">
                            <div class="position-relative">
                                @if (produto.PercentualDesconto.HasValue)
                                {
                                    <span class="badge bg-danger position-absolute top-0 end-0 m-2">
                                        @produto.PercentualDesconto%% OFF
                                    </span>
                                }
                                @if (!string.IsNullOrEmpty(produto.ImagemPrincipal))
                                {
                                    <img src="@produto.ImagemPrincipal" class="card-img-top product-image" alt="@produto.Nome">
                                }
                                else
                                {
                                    <div class="card-img-top product-image bg-light d-flex align-items-center justify-content-center">
                                        <i class="fas fa-image fa-3x text-muted"></i>
                                    </div>
                                }
                            </div>
                            <div class="card-body d-flex flex-column">
                                <h6 class="card-title">
                                    <a href="@Url.Action("Detalhes", "Produtos", new { id = produto.Id })" class="product-title">
                                        @produto.Nome
                                    </a>
                                </h6>
                                
                                @if (produto.PrecoOriginal.HasValue)
                                {
                                    <div class="product-price-original">R$ @produto.PrecoOriginal.Value.ToString("N2")</div>
                                }
                                
                                <div class="product-price">R$ @produto.Preco.ToString("N2")</div>
                                
                                @if (produto.PercentualDesconto.HasValue)
                                {
                                    <div class="product-discount">@produto.PercentualDesconto%% OFF</div>
                                }
                                
                                <div class="product-shipping mt-2">
                                    <i class="fas fa-truck"></i> Frete gr√°tis
                                </div>
                                
                                @if (produto.MediaAvaliacoes > 0)
                                {
                                    <div class="rating mt-2">
                                        <div class="rating-stars">
                                            @for (int i = 1; i <= 5; i++)
                                            {
                                                <i class="@(i <= produto.MediaAvaliacoes ? "fas" : "far") fa-star"></i>
                                            }
                                        </div>
                                        <small class="text-muted">(@produto.TotalAvaliacoes)</small>
                                    </div>
                                }
                                
                                <div class="mt-auto pt-3">
                                    <button class="btn btn-ml-primary w-100" 
                                            data-action="add-to-cart" 
                                            data-produto-id="@produto.Id">
                                        <i class="fas fa-cart-plus"></i> Adicionar ao carrinho
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </section>
}

<!-- Benef√≠cios -->
<section class="benefits-section bg-white py-5 mb-5">
    <div class="container">
        <div class="row text-center">
            <div class="col-md-3 mb-4">
                <div class="benefit-item">
                    <i class="fas fa-shield-alt fa-3x text-ml-success mb-3"></i>
                    <h5>Compra Protegida</h5>
                    <p class="text-muted">Receba o produto que est√° esperando ou devolvemos o dinheiro</p>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="benefit-item">
                    <i class="fas fa-truck fa-3x text-ml-primary mb-3"></i>
                    <h5>Frete Gr√°tis</h5>
                    <p class="text-muted">Em milh√µes de produtos a partir de R$ 79</p>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="benefit-item">
                    <i class="fas fa-credit-card fa-3x text-ml-warning mb-3"></i>
                    <h5>Parcelamento</h5>
                    <p class="text-muted">Parcele suas compras sem juros no cart√£o</p>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="benefit-item">
                    <i class="fas fa-headset fa-3x text-ml-success mb-3"></i>
                    <h5>Atendimento</h5>
                    <p class="text-muted">Estamos aqui para ajudar 24 horas por dia</p>
                </div>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        $(document).ready(function() {
=            $('#mainCarousel').carousel({
                interval: 5000,
                ride: 'carousel'
            });
            $('.product-card').addClass('fade-in-up');
        });
    </script>
}
